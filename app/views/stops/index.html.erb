<h2>SF-MUNI</h2>
<div class="headen">
    <%= hidden_field_tag(:latitude, params[:latitude])%>
    <%= hidden_field_tag(:longitude, params[:longitude])%>
</div>


<p>Click the button to get your coordinates.</p>
<button>Find me</button>
<p id="demo"></p>
<input type="hidden" value="" id="hidden1">
<input type="hidden" value="" id="hidden2">

<script>
$(document).ready(function(){
  $(".chosen").data("placeholder","Select Frameworks...").chosen();
});

 // var x = document.getElementById("demo");
 //
 //
 //     if (navigator.geolocation) {
 //         navigator.geolocation.getCurrentPosition(showPosition);
 //     } else {
 //         x.innerHTML = "Geolocation is not supported by this browser.";
 //     }
 //
 //
 // function showPosition(position) {
 //     x.innerHTML = "Latitude: " + position.coords.latitude +
 //     "<br>Longitude: " + position.coords.longitude;
 //     $("form input[name='latitude']").val(position.coords.latitude);
 //     $("form input[name='longitude']").val(position.coords.longitude);
 //     $('#hidden1').val(position.coords.latitude);
 //     $('#hidden2').val(position.coords.longitude);
 //
 //     $('#station').val(stop.title);
 //     $('#station').trigger("chosen:updated");
 //
 //      $('#station').chosen({});
 //
 //
 //  }

</script>
# <%- unless @lat_lng %>
# <script>
#   getGeoLocation();
#   function getGeoLocation() {
#   navigator.geolocation.getCurrentPosition(setGeoCookie);
# }
#
# function setGeoCookie(position) {
#   var cookie_val = position.coords.latitude + "|" + position.coords.longitude;
#   document.cookie = "lat_lng=" + escape(cookie_val);
# }
# </script>
# <%- end %>
<p><%= @message %></p>
<div class="stations"
  <p>All stops</p>
  <!-- list of all stops -->
  <form action="/stops" method="post">
  <select class="stop_title chosen" name="stop" id="station">
    <% @stops.each do |stop| %>
    <option name="stop.latitude" value="<%=stop.title%>, <%= stop.latitude%>, <%= stop.longitude %>"><%= stop.title %></option>
    <% end %>
  </select>
  <input type="submit" value="Show">
  </form>
</div>

<% if @message.empty? %>
<div class="stops">
  <% @res.select {|k,v| v.length != 0}.each do |k,v| %>
    <% next if v.last.nil?%>
      <div class="name-direction">
      <div> <%= v.last%>( <%= k%>):</div>
      <ul class="time-list">
      <% (v.length - 1).times do |elm| %>
        <% if v.index(v[elm]) == 0 %>
          <li class="time-first"><%= v[elm] %><span>min</span></li>
        <% else %>
          <li class="time"><%= v[elm] %><span>min</span></li>
        <% end %>
      <% end %>
      </ul>
      </div>
  <% end %>
</div>
<% end %>
